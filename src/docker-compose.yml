services:
 catalogdb:
  image: postgres

 basketdb:
  image: postgres

 distributedcash:
  image: redis

 orderdb:
  image: mcr.microsoft.com/mssql/server

 messagebroker:
  image: rabbitmq:management
  
 catalog.api:
  image: ${DOCKER_REGISTRY-}catalogapi
  build:
     context: .
     dockerfile: Catalog/Catalog.API/Dockerfile

 

 basket.api:
  image: ${DOCKER_REGISTRY-}basketapi
  build:
      context: .
      dockerfile: Basket/Basket.API/Dockerfile

 discount.grpc:
  image: ${DOCKER_REGISTRY-}discountgrpc
  build:
      context: .
      dockerfile: Discount/Discount.Grpc/Dockerfile

 order.api:
  image: ${DOCKER_REGISTRY-}orderapi
  build:
      context: .
      dockerfile: Ordering/Ordering.API/Dockerfile

volumes:
 postgres_catalog:
 postgres_basket:
 discountdata:

